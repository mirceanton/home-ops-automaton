---
apiVersion: operator.cluster.x-k8s.io/v1alpha2
kind: BootstrapProvider
metadata:
  name: talos
  namespace: capi-system
spec:
  # renovate: datasource=github-releases depName=siderolabs/cluster-api-bootstrap-provider-talos
  version: v0.6.10

  deployment:
    replicas: 1 #! TODO: Set to 2 or more when adding more nodes
    affinity:
      podAntiAffinity: {}
    #     requiredDuringSchedulingIgnoredDuringExecution:
    #       - labelSelector:
    #           matchExpressions:
    #             - key: cluster.x-k8s.io/provider
    #               operator: In
    #               values: ["bootstrap-talos"]
    #         topologyKey: kubernetes.io/hostname

    containers:
      - name: manager
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            memory: 256Mi
